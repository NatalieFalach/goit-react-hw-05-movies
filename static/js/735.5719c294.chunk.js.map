{"version":3,"file":"static/js/735.5719c294.chunk.js","mappings":"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","sources":["api/MovieDbApi.js","components/FilmList/FilmList.styled.js","components/FilmList/FilmList.jsx","helpers/getImageUrl.js","assets/search.svg","components/Search/Search.styled.js","components/Search/Search.jsx","pages/Movies/Movies.styled.js","pages/Movies/Movies.jsx"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://api.themoviedb.org/3';\n\nconst API_KEY = '8b8b26a0b27e03ef23871d035772175e';\n\nexport async function getTrending(page = 1) {\n  const { data: response } = await axios.get(`/trending/movie/week`, {\n    params: {\n      api_key: API_KEY,\n      page: page,\n    },\n  });\n  return response;\n}\n\nexport async function getFilmById(id) {\n  const { data: response } = await axios.get(`movie/${id}`, {\n    params: {\n      api_key: API_KEY,\n    },\n  });\n  return response;\n}\n\nexport async function getCastById(id) {\n  const { data: response } = await axios.get(`movie/${id}/credits`, {\n    params: {\n      api_key: API_KEY,\n    },\n  });\n  return response;\n}\n\nexport async function getReviewsById(id) {\n  const { data: response } = await axios.get(`movie/${id}/reviews`, {\n    params: {\n      api_key: API_KEY,\n    },\n  });\n  return response;\n}\n\nexport async function getMovieBySearch(search, page = 1) {\n  const { data: response } = await axios.get(`search/movie`, {\n    params: {\n      api_key: API_KEY,\n      query: search,\n      page: page,\n    },\n  });\n  return response;\n}\n","import styled from 'styled-components';\nimport { Link } from 'react-router-dom';\n\nexport const FilmItem = styled.li`\n  margin-bottom: 20px;\n  width: 200px;\n  text-decoration: none;\n  text-align: center;\n`;\n\nexport const StyledLink = styled(Link)`\n  text-decoration: none;\n  font-weight: 500;\n  color: black;\n  cursor: pointer;\n\n  &:hover {\n    color: orangered;\n  }\n`;\nexport const Poster = styled.img`\n  display: block;\n  margin-bottom: 15px;\n  width: 200px;\n  height: 300px;\n`;\nexport const Container = styled.ul`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 30px;\n  justify-content: center;\n`;\n","import { FilmItem, StyledLink, Poster, Container } from './FilmList.styled';\nimport PropTypes from 'prop-types';\nimport getImageUrl from 'helpers/getImageUrl';\nimport { useLocation } from 'react-router-dom';\nconst FilmList = ({films}) => {\n  const location = useLocation();\n  \n  return (\n    <Container>\n      {films.map((film, index) => {\n        return (\n          <FilmItem key={film.id}>\n            <StyledLink to={`/movies/${film.id}`} state={{ from: location }}>\n              <Poster src={getImageUrl(film.poster_path)} alt={film.title} /> \n              {film.title || film.name}\n            </StyledLink>\n          </FilmItem  >\n        )\n      })}\n    </Container>\n  )\n}\n\nexport default FilmList;\n\nFilmList.propTypes = {\n  films:PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    poster_path: PropTypes.string,\n    title: PropTypes.string,\n    name: PropTypes.string\n  })).isRequired,\n}","export default function getImageUrl(imageName) {\n  return imageName\n    ? `https://image.tmdb.org/t/p/w500${imageName}`\n    : 'https://via.placeholder.com/150/d3d3d3/ffffff?text=No++photo';\n}\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSearch(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"search\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.516 14.016q1.875 0 3.188-1.313t1.313-3.188-1.313-3.188-3.188-1.313-3.188 1.313-1.313 3.188 1.313 3.188 3.188 1.313zM15.516 14.016l4.969 4.969-1.5 1.5-4.969-4.969v-0.797l-0.281-0.281q-1.781 1.547-4.219 1.547-2.719 0-4.617-1.875t-1.898-4.594 1.898-4.617 4.617-1.898 4.594 1.898 1.875 4.617q0 0.984-0.469 2.227t-1.078 1.992l0.281 0.281h0.797z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSearch);\nexport default __webpack_public_path__ + \"static/media/search.995633c69fb3097a91f3840827682ccc.svg\";\nexport { ForwardRef as ReactComponent };","import styled from 'styled-components';\nimport searchIcon from '../../assets/search.svg';\n\nexport const SearchForm = styled.form`\n  display: flex;\n  justify-content: center;\n  margin-top: 15px;\n`;\n\nexport const SearchFormButton = styled.button`\n  margin-left: -30px;\n  display: inline-block;\n  width: 30px;\n  height: 30px;\n  border: 0;\n  background: none;\n  background-image: url(${searchIcon});\n  background-repeat: no-repeat;\n  background-position: center;\n  opacity: 0.6;\n  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  cursor: pointer;\n  outline: none;\n\n  &:hover {\n    opacity: 1;\n  }\n`;\nexport const Input = styled.input`\n  display: inline-block;\n  font-size: 20px;\n  width: 300px;\n  padding-left: 10px;\n  padding-right: 35px;\n  border-radius: 5px;\n  outline: none;\n  border: none;\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n`;\n","import { useState } from \"react\";\nimport PropTypes from 'prop-types';\nimport { SearchForm, SearchFormButton, Input } from './Search.styled';\nimport toast, { Toaster } from 'react-hot-toast';\n\nfunction Search({onSearch, searchValue}) {\n  const [value, setValue] = useState(() => {\n    return searchValue ?? '';\n  });\n\n  const onChange = (e) => {\n    setValue(e.target.value)\n  }\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    if (!value.trim()) {\n      toast.error('Empty search query')\n      return;\n    }\n    onSearch(value);      \n    setValue('');\n  }\n\n  return (\n    <div>\n      <SearchForm onSubmit={onSubmit}>\n        <Input type=\"text\"\n          value={value}\n          onChange={onChange}\n        />\n        <SearchFormButton type=\"submit\"></SearchFormButton>\n      </SearchForm>\n      <Toaster position=\"top-right\"/>\n    </div>\n  );\n}\n\nexport default Search;\n\nSearch.propTypes = {\n  onSearch: PropTypes.func.isRequired,\n  searchValue: PropTypes.string\n};","import styled from 'styled-components';\n\nexport const ErrorMessage = styled.div`\n  margin: 20px auto;\n  width: 120px;\n  font-weight: 700;\n  color: orangered;\n`;\n","import { getMovieBySearch } from '../../api/MovieDbApi';\nimport FilmList from 'components/FilmList/FilmList';\nimport Search from 'components/Search/Search';\nimport React, { useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport Spinner from 'components/Spinner/Spinner';\nimport { useInView } from 'react-intersection-observer';\nimport { ErrorMessage } from './Movies.styled';\n\nfunction Movies() {\n  const [films, setFilms] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [hasMore, setHasMore] = useState(true);\n  const [error, setError] = useState('');\n  const search = searchParams.get('search') ?? '';\n\n  const { ref } = useInView({\n    \"rootMargin\": \"0px 0px\",\n    onChange: (inView) => {      \n      if (inView && search && hasMore && !error) {\n        setIsLoading(true);\n        getMovieBySearch(search, page).then((data) => {\n          if (data.total_pages === page) {\n            setHasMore(false);\n            return;\n          }\n          setFilms((prev) => [...prev, ...data.results])\n          setPage((prev) => prev + 1);\n        }).catch((error) => {\n          setError('Ops...try again latter')\n        }).finally(() => {\n          setIsLoading(false);\n        })\n      }\n    }\n  });\n\n  const onSearch = (search) => {\n    setError('');\n    setSearchParams({ search });\n    setIsLoading(true);\n    setPage(1);\n    getMovieBySearch(search).then((data) => {\n      if (!data.results.length) {\n        setError('Nothing found');\n      }\n      setFilms(data.results)\n      setPage((prev) => prev + 1);\n    }).catch((error) => {\n      setError('Ops...try again latter');\n    }).finally(() => {\n      setIsLoading(false);\n    })\n  }\n\n  return (\n    <>\n      <Search onSearch={onSearch} searchValue={search} />\n      {isLoading && <Spinner />}\n      {error && <ErrorMessage>{error}</ErrorMessage>}\n      <FilmList films={films} />\n      <div style={{height: '1px'}} ref={ref}>\n        {isLoading && films.length > 0 && <Spinner/>}\n      </div>\n    </>\n  );\n}\n\nexport default Movies;"],"names":["axios","API_KEY","getTrending","page","params","api_key","response","data","getFilmById","id","getCastById","getReviewsById","getMovieBySearch","search","query","FilmItem","styled","StyledLink","Link","Poster","Container","films","location","useLocation","map","film","index","to","state","from","src","getImageUrl","poster_path","alt","title","name","imageName","SearchForm","SearchFormButton","searchIcon","Input","onSearch","searchValue","useState","value","setValue","onSubmit","e","preventDefault","trim","toast","type","onChange","target","position","ErrorMessage","setFilms","isLoading","setIsLoading","setPage","useSearchParams","searchParams","setSearchParams","hasMore","setHasMore","error","setError","get","ref","useInView","inView","then","total_pages","prev","results","catch","finally","length","Spinner","FilmList","style","height"],"sourceRoot":""}